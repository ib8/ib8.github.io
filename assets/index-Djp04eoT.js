function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./Setup-BoY51rGb.js","./vendor-CPwamtYr.js","./Overview-C8T8zkgK.js","./Connections-DkCGUk06.js","./index-CfoKSbYL.js","./ConfigTitle-DG0DCnFB.js","./global-f1SviijU.js","./Logs-B6a-XADG.js","./Proxies-BFGT23Bh.js","./Rules-Bs7Ykwh9.js","./Config-B243f-qt.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{s as qe,a as je,m as Ae,t as D,i as f,c,S as L,b as U,d as P,e as V,f as ge,g as M,h as Fe,j as v,k as u,l as ze,n as Ne,r as Re,o as Be,p as J,u as me,q as B,v as He,w as H,x as fe,y as Oe,z as We,A as F,B as Xe,I as Ve,C as K,F as G,D as Z,E as Je,G as Ze,H as Ge,J as Ee,K as Qe,L as Ke,M as Ye,N as et,O as tt,P as st,Q as at,R as nt,T as ot,U as rt,V as lt,W as it,X as T,Y as ct,Z as _}from"./vendor-CPwamtYr.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function a(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(n){if(n.ep)return;n.ep=!0;const o=a(n);fetch(n.href,o)}})();const dt="modulepreload",ut=function(e,t){return new URL(e,t).href},ee={},q=function(t,a,s){let n=Promise.resolve();if(a&&a.length>0){const o=document.getElementsByTagName("link");n=Promise.all(a.map(r=>{if(r=ut(r,s),r in ee)return;ee[r]=!0;const p=r.endsWith(".css"),i=p?'[rel="stylesheet"]':"";if(!!s)for(let g=o.length-1;g>=0;g--){const m=o[g];if(m.href===r&&(!p||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${i}`))return;const d=document.createElement("link");if(d.rel=p?"stylesheet":dt,p||(d.as="script",d.crossOrigin=""),d.href=r,document.head.appendChild(d),p)return new Promise((g,m)=>{d.addEventListener("load",g),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${r}`)))})}))}return n.then(()=>t()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})};var pt=P('<div class="loading loading-spinner">'),gt=P('<button><span class="truncate rounded-none">');const he=e=>{const[t,a]=qe(e,["class","loading","icon"]);return(()=>{var s=gt(),n=s.firstChild;return je(s,Ae({get class(){return D("btn flex items-center",t.loading?"btn-disabled":t.class)}},a),!1,!0),f(s,c(L,{get when(){return t.loading},get children(){return pt()}}),n),f(n,()=>e.icon||e.children),U(()=>n.classList.toggle("flex-1",!t.icon)),s})()};var mt=P('<div><div class="collapse-title pr-4 text-xl font-medium after:!top-8"></div><div>');const Bs=e=>{const{title:t,onCollapse:a}=e,s=()=>e.isOpen?"collapse-open":"collapse-close",n=()=>e.isOpen?"opacity-100":"opacity-0";return(()=>{var o=mt(),r=o.firstChild,p=r.nextSibling;return r.$$click=()=>a(!e.isOpen),f(r,t),f(p,c(L,{get when(){return e.isOpen},get children(){return ge(()=>e.children)()}})),U(i=>{var l=D(s(),"collapse collapse-arrow select-none border-secondary bg-base-200 shadow-md"),d=D(n(),"collapse-content grid grid-cols-2 gap-2 transition-opacity duration-1000 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5");return l!==i.e&&M(o,i.e=l),d!==i.t&&M(p,i.t=d),i},{e:void 0,t:void 0}),o})()};V(["click"]);const ft=["acid","aqua","autumn","black","bumblebee","business","cmyk","coffee","corporate","cupcake","cyberpunk","dark","dim","dracula","emerald","fantasy","forest","garden","halloween","lemonade","light","lofi","luxury","night","nord","pastel","retro","sunset","synthwave","valentine","winter","wireframe"];var C=(e=>(e.Overview="/overview",e.Proxies="/proxies",e.Rules="/rules",e.Conns="/conns",e.Log="/logs",e.Config="/config",e.Setup="/setup",e))(C||{});const ht=10,Hs={title:{align:"center",style:{color:"gray",fontSize:"16px"}},chart:{toolbar:{show:!1},zoom:{enabled:!1},animations:{easing:"linear"}},noData:{text:"Loading..."},legend:{showForSingleSeries:!0,fontSize:"16px",labels:{colors:"gray"},itemMargin:{horizontal:32}},dataLabels:{enabled:!1},grid:{yaxis:{lines:{show:!1}}},stroke:{curve:"smooth"},tooltip:{enabled:!1},xaxis:{range:ht,labels:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"gray",fontSize:"13px"},formatter:e=>Fe(e).toString()}}};var Y=(e=>(e[e.NOT_CONNECTED=-1]="NOT_CONNECTED",e[e.MEDIUM=200]="MEDIUM",e[e.HIGH=500]="HIGH",e))(Y||{}),ve=(e=>(e[e.NOT_CONNECTED=-1]="NOT_CONNECTED",e[e.MEDIUM=800]="MEDIUM",e[e.HIGH=1500]="HIGH",e))(ve||{}),ye=(e=>(e.OFF="off",e.DOTS="dots",e.BAR="bar",e.Auto="auto",e))(ye||{}),k=(e=>(e.NATURAL="orderNatural",e.LATENCY_ASC="orderLatency_asc",e.LATENCY_DESC="orderLatency_desc",e.NAME_ASC="orderName_asc",e.NAME_DESC="orderName_desc",e))(k||{}),O=(e=>(e.EN="en-US",e.ZH="zh-CN",e))(O||{}),be=(e=>(e.Details="details",e.Close="close",e.ID="ID",e.Type="type",e.Process="process",e.Host="host",e.SniffHost="sniffHost",e.Rule="rules",e.Chains="chains",e.DlSpeed="dlSpeed",e.ULSpeed="ulSpeed",e.Download="dl",e.Upload="ul",e.ConnectTime="connectTime",e.SourceIP="sourceIP",e.SourcePort="sourcePort",e.Destination="destination",e.InboundUser="inboundUser",e))(be||{});const te=200,we=Object.values(be),vt={...Object.fromEntries(we.map(e=>[e,!0])),ID:!1};var I=(e=>(e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e))(I||{}),yt=(e=>(e.Global="global",e.Rule="rule",e.Direct="direct",e))(yt||{}),xe=(e=>(e.Info="info",e.Error="error",e.Warning="warning",e.Debug="debug",e.Silent="silent",e))(xe||{});const bt=[200,300,500,800,1e3],wt=bt[0],xt={add:"Add",overview:"Overview",proxies:"Proxies",proxiesSettings:"Proxies Settings",rules:"Rules",connections:"Connections",connectionsSettings:"Connections Settings",connectionsDetails:"Connections Details",logs:"Logs",logsSettings:"Logs Settings",config:"Config",upload:"Upload",download:"Download",uploadTotal:"Upload Total",downloadTotal:"Download Total",activeConnections:"Active Connections",memoryUsage:"Memory Usage",traffic:"Traffic",memory:"Memory",down:"Down",up:"Up",proxyProviders:"Proxy Providers",ruleProviders:"Rule Providers",search:"Search",ID:"ID",type:"Type",name:"Name",process:"Process",host:"Host",sniffHost:"Sniff Host",chains:"Chains",connectTime:"Time",dlSpeed:"DL Speed",ulSpeed:"UL Speed",dl:"DL",ul:"UL",sourceIP:"Source IP",sourcePort:"Source Port",destination:"Destination",inboundUser:"Inbound User",close:"Close",reset:"Reset",dnsQuery:"DNS Query",dots:"Dots",bar:"Bar",auto:"Auto",off:"Off",proxiesPreviewType:"Proxies preview type",urlForIPv6SupportTest:"URL for IPv6 support test",urlForLatencyTest:"URL for latency test",autoCloseConns:"Automatically Close connections",useTwemoji:"Use Twemoji Mozilla Font",autoSwitchTheme:"Automatically switch theme",favDayTheme:"Favorite light theme",favNightTheme:"Favorite dark theme",renderInTwoColumns:"Render in two columns",updateGEODatabases:"Update GEO Databases",restartCore:"Restart Core",upgradeCore:"Upgrade Core",proxiesSorting:"Proxies Sorting",orderNatural:"Original order in config file",orderLatency_asc:"By latency from low to high",orderLatency_desc:"By latency from high to low",orderName_asc:"By name alphabetically (A-Z)",orderName_desc:"By name alphabetically (Z-A)",ms:"ms",updated:"Updated",tableSize:"Table size",logLevel:"Log Level",info:"info",silent:"silent",debug:"debug",warning:"warning",error:"error",logMaxRows:"Log Maximum Reserved Rows",xs:"Extra small size",sm:"Small size",md:"Normal size",lg:"Large size",switchEndpoint:"Switch Endpoint",switchLanguage:"Switch Language",latencyTestTimeoutDuration:"Latency Test Timeout Duration",all:"All",sequence:"Sequence",payload:"Payload",details:"Details",endpointURL:"Endpoint URL",secret:"Secret",global:"Global",rule:"Rule",direct:"Direct",active:"Active",closed:"Closed",sort:"Sort",hideUnAvailableProxies:"Hide UnAvailable Proxies",reloadConfig:"Reload Config",flushFakeIP:"Flush Fake-IP",tagClientSourceIPWithName:"Tag Client Source IP With Name",tag:"Tag",coreConfig:"Core Config",xdConfig:"XD Config",version:"Version",expire:"Expire",noExpire:"Null",allowLan:"Allow Lan",enableTunDevice:"Enable TUN Device",tunModeStack:"TUN Mode Stack",tunDeviceName:"TUN Device Name",interfaceName:"Interface Name",en:"English",zh:"Chinese",port:"{{ name }} Port"},Pt={add:"添加",overview:"概览",proxies:"代理",proxiesSettings:"代理设置",rules:"规则",connections:"连接",connectionsSettings:"连接设置",connectionsDetails:"连接详情",logs:"日志",logsSettings:"日志设置",config:"配置",upload:"上传",download:"下载",uploadTotal:"上传总量",downloadTotal:"下载总量",activeConnections:"活动连接",memoryUsage:"内存使用情况",traffic:"流量",memory:"内存",down:"下载",up:"上传",proxyProviders:"代理提供者",ruleProviders:"规则提供者",search:"搜索",ID:"ID",type:"类型",name:"名字",process:"进程",host:"主机",sniffHost:"嗅探域名",chains:"链路",connectTime:"连接时间",dlSpeed:"下载速度",ulSpeed:"上传速度",dl:"下载量",ul:"上传量",sourceIP:"源地址",sourcePort:"源端口",destination:"目标地址",inboundUser:"入站用户",close:"关闭",reset:"重置",dnsQuery:"DNS 查询",dots:"点阵",bar:"条形",auto:"自适应",off:"关闭",proxiesPreviewType:"节点组预览样式",urlForIPv6SupportTest:"测试 IPv6 支持链接",urlForLatencyTest:"测速链接",autoCloseConns:"自动断开连接",useTwemoji:"使用 Twemoji Mozilla 字体",autoSwitchTheme:"自动切换主题",favDayTheme:"浅色主题偏好",favNightTheme:"深色主题偏好",renderInTwoColumns:"双列渲染",updateGEODatabases:"更新 GEO 数据库",restartCore:"重启核心",upgradeCore:"更新核心",proxiesSorting:"节点排序",orderNatural:"原配置文件中的排序",orderLatency_asc:"按延迟从低到高",orderLatency_desc:"按延迟从高到低",orderName_asc:"按名称字母排序 (A-Z)",orderName_desc:"按名称字母排序 (Z-A)",ms:"毫秒",updated:"更新于",tableSize:"表格大小",logLevel:"日志等级",info:"信息",silent:"静默",debug:"调试",warning:"警告",error:"错误",logMaxRows:"日志最大保留行数",xs:"超小尺寸",sm:"小尺寸",md:"正常尺寸",lg:"超大尺寸",switchEndpoint:"切换后端",switchLanguage:"切换语言",latencyTestTimeoutDuration:"测速超时时间",all:"全部",sequence:"序列号",payload:"内容",details:"详情",endpointURL:"后端地址",secret:"密钥",global:"全局",rule:"规则",direct:"直连",active:"活动",closed:"已关闭",sort:"排序",hideUnAvailableProxies:"隐藏不可用节点",reloadConfig:"重载配置",flushFakeIP:"清空 Fake-IP",tagClientSourceIPWithName:"为客户端源 IP 地址添加名称标记",tag:"标记",coreConfig:"核心配置",xdConfig:"XD 配置",version:"版本",expire:"到期时间",noExpire:"不限时",allowLan:"允许局域网访问",enableTunDevice:"开启 TUN 转发",tunModeStack:"TUN 模式堆栈",tunDeviceName:"TUN 设备名称",interfaceName:"接口名称",en:"英文",zh:"中文",port:"{{ name }} 端口"},Pe={[O.EN]:xt,[O.ZH]:Pt},[Ct,Os]=v(u(Reflect.has(Pe,navigator.language)?navigator.language:O.EN),{name:"lang",storage:localStorage}),[St,Tt]=ze(e=>[Ne(()=>Be(Pe[e.locale]),Re)]),Ce=()=>Tt(),[Ws,Xs]=v(u(ye.Auto),{name:"proxiesPreviewType",storage:localStorage}),[Vs,Js]=v(u(k.NATURAL),{name:"proxiesOrderingType",storage:localStorage}),[Zs,Gs]=v(u(!1),{name:"hideUnAvailableProxies",storage:localStorage}),[Es,Qs]=v(u(!0),{name:"renderProxiesInTwoColumns",storage:localStorage}),[W,Ks]=v(u("https://www.gstatic.com/generate_204"),{name:"urlForLatencyTest",storage:localStorage}),[E,Ys]=v(u("https://api-ipv6.ip.sb/ip"),{name:"urlForIPv6SupportTest",storage:localStorage}),[$t,ea]=v(u(!1),{name:"autoCloseConns",storage:localStorage}),[Dt,ta]=v(u(!0),{name:"useTwemoji",storage:localStorage}),[Lt,sa]=v(u(!1),{name:"autoSwitchTheme",storage:localStorage}),[kt,aa]=v(u("nord"),{name:"favDayTheme",storage:localStorage}),[It,na]=v(u("sunset"),{name:"favNightTheme",storage:localStorage}),[oa,ra]=v(u(I.XS),{name:"connectionsTableSize",storage:localStorage}),[la,ia]=v(u(vt),{name:"connectionsTableColumnVisibility",storage:localStorage}),[ca,da]=v(u(we),{name:"connectionsTableColumnOrder",storage:localStorage}),[ua,pa]=v(u([]),{name:"clientSourceIPTags",storage:localStorage}),[ga,ma]=v(u(I.XS),{name:"logsTableSize",storage:localStorage}),[fa,ha]=v(u(xe.Info),{name:"logLevel",storage:localStorage}),[va,ya]=v(u(wt),{name:"logMaxRows",storage:localStorage}),ba=e=>{let t="table-xs";switch(e){case I.XS:t="table-xs";break;case I.SM:t="table-sm";break;case I.MD:t="table-md";break;case I.LG:t="table-lg";break}return t},[R,wa]=v(u(5e3),{name:"latencyTestTimeoutDuration",storage:localStorage}),Mt=()=>W().startsWith("https"),$=()=>Mt()?ve:Y,[Ut,Se]=u([]),[Te,_t]=u(null),xa=()=>{const[e,t]=u([]),[a,s]=u([]),[n,o]=u(!1);return J(()=>{var p;const r=(p=Te())==null?void 0:p.connections;r&&me(()=>{const i=$e(r,a());if(qt(a()),!n()){const l=jt(i,Ut());s(i),t(l.slice(-te))}Se(l=>l.slice(-(i.length+te)))})}),{closedConnections:e,activeConnections:a,paused:n,setPaused:o}},$e=(e,t)=>{const a=new Map;return t.forEach(s=>a.set(s.id,s)),e.map(s=>{const n=a.get(s.id);return!n||!B.isNumber(n.download)||!B.isNumber(n.upload)?{...s,downloadSpeed:0,uploadSpeed:0}:{...s,downloadSpeed:s.download-n.download,uploadSpeed:s.upload-n.upload}})},qt=e=>{Se(t=>B.unionWith(t,e,(a,s)=>a.id===s.id))},jt=(e,t)=>B.differenceWith(t,e,(a,s)=>a.id===s.id),Pa=()=>w().delete("connections"),At=e=>w().delete(`connections/${e}`),[Ca,se]=u(!1),[Sa,ae]=u(!1),[Ta,ne]=u(!1),[$a,oe]=u(!1),[Da,re]=u(!1),La=async()=>{const e=w();se(!0);try{await e.put("configs",{searchParams:{force:!0},json:{path:"",payload:""}})}catch{}se(!1)},ka=async()=>{const e=w();ne(!0);try{await e.post("cache/fakeip/flush")}catch{}ne(!1)},Ia=async()=>{const e=w();ae(!0);try{await e.post("configs/geo")}catch{}ae(!1)},Ma=async()=>{const e=w();oe(!0);try{await e.post("upgrade")}catch{}oe(!1)},Ua=async()=>{const e=w();re(!0);try{await e.post("restart")}catch{}re(!1)},_a=()=>w().get("configs").json(),qa=async(e,t,a)=>{try{await w().patch("configs",{json:{[e]:t}}).json(),await a()}catch(s){He.error(s.message)}},ja=async()=>{const e=w(),{version:t}=await e.get("version").json();return t},Ft=()=>w().get("providers/proxies").json(),zt=()=>w().get("proxies").json(),le=e=>w().put(`providers/proxies/${e}`),De=e=>w().get(`providers/proxies/${e}/healthcheck`,{timeout:5*1e3}).json(),Nt=(e,t)=>w().put(`proxies/${e}`,{body:JSON.stringify({name:t})}),ie=(e,t,a,s)=>{const n=w();return t!==""?De(t).then(o=>({delay:o[e]})):n.get(`proxies/${e}/delay`,{searchParams:{url:a,timeout:s}}).json()},ce=(e,t,a)=>w().get(`group/${e}/delay`,{searchParams:{url:t,timeout:a}}).json(),Aa=()=>w().get("rules").json(),Fa=()=>w().get("providers/rules").json(),za=e=>w().put(`providers/rules/${e}`),Na=async e=>{const t="https://api.github.com/repos/MetaCubeX/mihomo",a=/(alpha|beta|meta)-?(\w+)/.exec(e);if(!a)return!1;const s=a[1],n=a[2];if(s==="meta"){const{assets:o}=await H.get(`${t}/releases/latest`).json();return!o.some(({name:p})=>p.includes(n))}if(s==="alpha"){const{assets:o}=await H.get(`${t}/releases/tags/Prerelease-Alpha`).json();return!o.some(({name:p})=>p.includes(n))}return!1},Ra=e=>e.includes("sing-box"),Ba=e=>/^https?/.test(e)?e:`${window.location.protocol}//${e}`,z=()=>{const[e,t]=u({}),a=(n,o)=>{t({...e(),[n]:o})};return{map:e,set:a,setWithCallback:async(n,o)=>{a(n,!0);try{await o()}catch{}a(n,!1)}}},Rt=(e="")=>{const t=e.toLowerCase();return t.includes("shadowsocks")?t.replace("shadowsocks","ss"):t==="hysteria"?"hy":t==="wireguard"?"wg":t},Bt=(e="")=>{const t=e.toLowerCase();return!["selector","direct","reject","urltest","loadbalance","fallback","relay"].includes(t)},Ha=(e,t,a,s)=>a===k.NATURAL?e:e.sort((n,o)=>{if(s!=null&&s.has(n)&&!(s!=null&&s.has(o)))return-1;if(s!=null&&s.has(o)&&!(s!=null&&s.has(n)))return 1;const r=t[n],p=t[o];switch(a){case k.LATENCY_ASC:return r===$().NOT_CONNECTED?1:p===$().NOT_CONNECTED?-1:r-p;case k.LATENCY_DESC:return r===$().NOT_CONNECTED?1:p===$().NOT_CONNECTED?-1:p-r;case k.NAME_ASC:return n.localeCompare(o);case k.NAME_DESC:return o.localeCompare(n);default:return 0}}),Oa=(e,t,a,s)=>s?e.filter(n=>a!=null&&a.has(n)?!0:t[n]!==$().NOT_CONNECTED):e,{map:Ht,set:Ot}=z(),{map:Wt,setWithCallback:Xt}=z(),{map:Vt,setWithCallback:Jt}=z(),{map:Zt,setWithCallback:Gt}=z(),{map:Et,setWithCallback:Qt}=z(),[Kt,de]=u(!1),[Yt,es]=u([]),[ts,ss]=u(new Set),[ue,as]=u([]),[Le,Q]=u({}),[ke,A]=u({}),[Ie,ns]=u({}),os=e=>{var p;const t={...Ie()},a={...Le()},s={...ke()},n=(i,l,d=!0)=>{var m,y,x,b;const g=(m=i.extra)==null?void 0:m[l];if(Array.isArray(g)){const h=(y=g.at(-1))==null?void 0:y.delay;if(h)return h}if(d)return(b=(x=i.history)==null?void 0:x.at(-1))==null?void 0:b.delay},o={};e.forEach(i=>{const{udp:l,xudp:d,type:g,now:m,name:y,provider:x=""}=i;if(t[i.name]={udp:l,xudp:d,type:g,now:m,name:y,provider:x},!m)a[i.name]=n(i,W())||$().NOT_CONNECTED;else if(a[m]!==void 0)a[i.name]=a[m];else{const h=o[m]??new Set;h.add(i.name),o[m]=h}const b=(n(i,E(),!1)??0)>0;s[i.name]=b});const r=Object.keys(o).filter(i=>a[i]!==void 0);for(;r.length>0;){const i=r.shift(),l=a[i];for(const d of((p=o[i])==null?void 0:p.values())??[])a[d]=l,r.push(d)}fe(()=>{ns(t),Q(a),A(s)})},X=()=>{const e=async()=>{const[{providers:l},{proxies:d}]=await Promise.all([Ft(),zt()]),g=[...d.GLOBAL.all??[],"GLOBAL"],m=Object.values(d).filter(b=>{var h;return(h=b.all)==null?void 0:h.length}).sort((b,h)=>g.indexOf(b.name)-g.indexOf(h.name)),y=Object.values(l).filter(b=>b.name!=="default"&&b.vehicleType!=="Compatible"),x=[...Object.values(d),...y.flatMap(b=>b.proxies.filter(h=>!(h.name in d)).map(h=>({...h,provider:b.name})))];fe(()=>{es(m),ss(new Set(["DIRECT","REJECT",...m.map(b=>b.name)])),as(y),os(x)})},t=async(l,d)=>{await Nt(l.name,d),await e(),$t()&&me(()=>{var m;const g=$e(((m=Te())==null?void 0:m.connections)??[],[]);g.length>0&&g.forEach(({id:y,chains:x})=>{x.includes(l.name)&&At(y)})})},a=async(l,d)=>{const g=E();if(!g||g.length===0){A({});return}let m=!1;try{const{delay:y}=await ie(l,d,g,R());m=y>0}catch{m=!1}A(y=>({...y,[l]:m}))},s=async l=>{const d=E();if(!d||d.length===0){A({});return}const g=await ce(l,d,R()),m=Object.fromEntries(Object.entries(g).map(([y,x])=>[y,x>0]));A(y=>({...y,...m}))};return{collapsedMap:Ht,setCollapsedMap:Ot,proxyIPv6SupportMap:ke,proxyLatencyTestingMap:Wt,proxyGroupLatencyTestingMap:Vt,proxyProviderLatencyTestingMap:Zt,updatingMap:Et,isAllProviderUpdating:Kt,proxies:Yt,proxyGroupNames:ts,proxyProviders:ue,proxyLatencyTest:async(l,d)=>{Xt(l,async()=>{const{delay:g}=await ie(l,d,W(),R());Q(m=>({...m,[l]:g}))}),await a(l,d)},proxyGroupLatencyTest:async l=>{Jt(l,async()=>{const d=await ce(l,W(),R());Q(g=>({...g,...d})),await e()}),await s(l)},latencyMap:Le,proxyNodeMap:Ie,fetchProxies:e,selectProxyInGroup:t,updateProviderByProviderName:l=>Qt(l,async()=>{try{await le(l)}catch{}await e()}),updateAllProvider:async()=>{de(!0);try{await Promise.allSettled(ue().map(l=>le(l.name))),await e()}finally{de(!1)}},proxyProviderLatencyTest:l=>Gt(l,async()=>{await De(l),await e()})}},[rs,Wa]=v(u(""),{name:"selectedEndpoint",storage:localStorage}),[ls,Xa]=v(u([]),{name:"endpointList",storage:localStorage}),w=()=>{const e=N();if(!e)return H.create({});const t=new Headers;return e.secret&&t.set("Authorization",`Bearer ${e.secret}`),H.create({prefixUrl:e.url,headers:t})},N=()=>ls().find(({id:e})=>e===rs()),is=()=>{var e;return(e=N())==null?void 0:e.secret},cs=()=>{var e;return new URL(((e=N())==null?void 0:e.url)??"").origin.replace("http","ws")},ds=(e,t={})=>{const a=new URLSearchParams(t);a.set("token",is()??"");const s=Oe(`${cs()}/${e}?${a.toString()}`),n=We(s,"message");return F(()=>{var r;return n()?JSON.parse((r=n())==null?void 0:r.data):null})},[us,Me]=v(u("sunset"),{name:"theme",storage:localStorage});var ps=P('<li class="tooltip tooltip-bottom">'),gs=P('<div class="drawer drawer-end w-auto sm:ml-auto"><input id=themes type=checkbox class=drawer-toggle><div class="drawer-content flex items-center"><label for=themes class="btn btn-circle btn-primary drawer-button btn-sm"></label></div><div class="drawer-side overflow-x-hidden"><label for=themes class=drawer-overlay></label><ul class="menu gap-2 rounded-l-box bg-base-300 p-2">'),ms=P('<li class="btn btn-xs">'),fs=P('<div class="navbar-center hidden lg:flex"><ul class="menu menu-horizontal menu-lg gap-2 p-0">'),hs=P('<ul class="navbar z-50 flex w-auto items-center justify-center bg-base-300 px-4 shadow-lg"><div class="navbar-start gap-4"><div class="drawer w-auto lg:hidden"><input id=navs type=checkbox class=drawer-toggle><div class="drawer-content flex items-center"><label for=navs class="btn btn-circle drawer-button btn-sm"></label></div><div class=drawer-side><label for=navs class=drawer-overlay></label><ul class="menu min-h-full w-2/5 gap-2 rounded-r-box bg-base-300 pt-20"></ul></div></div></div><div class=navbar-end><div class="flex items-center gap-2">'),vs=P("<li>");const ys=({href:e,tooltip:t,children:a})=>(()=>{var s=ps();return Z(s,"data-tip",t),f(s,c(K,{class:"rounded-box",href:e,children:a})),s})(),bs=()=>(()=>{var e=gs(),t=e.firstChild,a=t.nextSibling,s=a.firstChild,n=a.nextSibling,o=n.firstChild,r=o.nextSibling;return f(s,c(Je,{})),f(r,c(G,{each:ft,children:p=>(()=>{var i=ms();return i.$$click=()=>Me(p),Z(i,"data-theme",p),f(i,p),i})()})),e})(),ws=()=>{const[e]=Ce(),t=()=>[{href:C.Overview,name:e("overview"),icon:c(Ze,{})},{href:C.Proxies,name:e("proxies"),icon:c(Ge,{})},{href:C.Rules,name:e("rules"),icon:c(Ee,{})},{href:C.Conns,name:e("connections"),icon:c(Qe,{})},{href:C.Log,name:e("logs"),icon:c(Ke,{})},{href:C.Config,name:e("config"),icon:c(Ye,{})}],a=Xe(),[s,n]=u(!1);return(()=>{var o=hs(),r=o.firstChild,p=r.firstChild,i=p.firstChild,l=i.nextSibling,d=l.firstChild,g=l.nextSibling,m=g.firstChild,y=m.nextSibling,x=r.nextSibling,b=x.firstChild;return i.addEventListener("change",h=>n(h.target.checked)),f(d,c(Ve,{})),f(y,c(G,{get each(){return t()},children:({href:h,name:j})=>(()=>{var S=vs();return S.$$click=()=>n(!1),f(S,c(K,{href:h,children:j})),S})()})),f(r,c($s,{}),null),f(o,c(L,{get when(){return a.pathname!==C.Setup},get children(){var h=fs(),j=h.firstChild;return f(j,c(G,{get each(){return t()},children:({href:S,name:Ue,icon:_e})=>c(ys,{href:S,tooltip:Ue,children:_e})})),h}}),x),f(b,c(bs,{})),U(()=>i.checked=s()),o})()};V(["click"]);var xs=P('<span class="badge badge-sm p-px"><span class=scale-75>IPv6');const Ps=e=>{const{proxyIPv6SupportMap:t}=X(),a=F(()=>t()[e.name]===!0);return c(L,{get when(){return a()},get children(){return xs()}})};var Cs=P("<span>");const Ss=e=>{const[t]=Ce(),{latencyMap:a}=X(),[s,n]=u(""),o=F(()=>a()[e.name]);return J(()=>{n("text-success"),o()>$().HIGH?n("text-error"):o()>$().MEDIUM&&n("text-warning")}),c(L,{get when(){return F(()=>typeof o()=="number")()&&o()!==Y.NOT_CONNECTED},get children(){var r=Cs();return f(r,o,null),f(r,()=>t("ms"),null),U(()=>M(r,`whitespace-nowrap text-xs ${s()}`)),r}})};var Ts=P('<div class="text-md flex items-center gap-1 whitespace-nowrap font-bold uppercase sm:text-xl"><span>(</span><a class="text-primary transition-transform hover:rotate-90 hover:scale-125"href=https://github.com/metacubex/metacubexd target=_blank>xd</a><span>)');const $s=()=>(()=>{var e=Ts(),t=e.firstChild;return f(e,c(K,{class:"bg-gradient-to-br from-primary to-secondary bg-clip-text text-transparent",get href(){return N()?"/":"/setup"},children:"metacube"}),t),e})();var Ds=P('<div class="sticky bottom-0 z-50 flex items-center justify-end bg-base-100 bg-opacity-80 p-4 backdrop-blur"><div class="flex justify-end gap-2">'),Ls=P('<dialog class="modal modal-bottom sm:modal-middle"><div class="modal-box p-0"><div><div class="flex items-center gap-4 text-xl font-bold"><span></span></div></div><div class=p-4></div></div><form method=dialog class=modal-backdrop><button>');const ks="sticky bottom-0 z-50 flex items-center justify-end bg-base-100 bg-opacity-80 p-4 backdrop-blur",Va=e=>{let t;return(()=>{var a=Ls(),s=a.firstChild,n=s.firstChild,o=n.firstChild,r=o.firstChild,p=n.nextSibling;return et(i=>{var l;return(t=i)&&((l=e.ref)==null?void 0:l.call(e,i))},a),s.$$contextmenu=i=>i.preventDefault(),f(o,()=>e.icon,r),f(r,()=>e.title),f(n,c(he,{class:"btn-circle btn-sm",onClick:()=>t==null?void 0:t.close(),get icon(){return c(tt,{size:20})}}),null),f(p,ge(()=>e.children)),f(s,c(L,{get when(){return e.action},get children(){var i=Ds(),l=i.firstChild;return f(l,()=>e.action),i}}),null),U(()=>M(n,D(ks,"top-0 justify-between"))),a})()};V(["contextmenu"]);var Is=P('<div><div class="flex items-center justify-between gap-2"><span class="break-all text-left text-sm"></span><span class="flex items-center gap-1"></span></div><div class="flex items-center justify-between gap-1"><div></div><div class=text-xs>');const Ja=e=>{const{proxyLatencyTest:t,proxyLatencyTestingMap:a}=X(),{proxyName:s,isSelected:n,onClick:o}=e,{proxyNodeMap:r}=X(),p=F(()=>r()[s]),i=()=>{var l,d,g;return Bt((l=p())==null?void 0:l.type)?(d=p())!=null&&d.xudp?"xudp":(g=p())!=null&&g.udp?"udp":null:null};return(()=>{var l=Is(),d=l.firstChild,g=d.firstChild,m=g.nextSibling,y=d.nextSibling,x=y.firstChild,b=x.nextSibling;return st(l,"click",o,!0),Z(l,"title",s),f(g,s),f(m,c(Ps,{get name(){return e.proxyName}}),null),f(m,c(he,{class:"btn-circle btn-ghost h-auto min-h-0 w-auto",get icon(){return c(at,{size:20,get class(){return D(a()[s]&&"animate-pulse text-success")}})},onClick:h=>{h.stopPropagation(),t(s,p().provider)}}),null),f(x,()=>{var h;return Rt((h=p())==null?void 0:h.type)},null),f(x,c(L,{get when(){return i()},get children(){return` :: ${i()}`}}),null),f(b,c(Ss,{get name(){return e.proxyName}})),U(h=>{var j=D("border-neutral-focus card card-bordered tooltip-bottom flex flex-col justify-between gap-1 bg-neutral p-2 text-neutral-content",n&&"border-primary bg-primary-content text-primary",o&&"cursor-pointer"),S=D("text-xs text-slate-500",n&&"text-primary");return j!==h.e&&M(l,h.e=j),S!==h.t&&M(x,h.t=S),h},{e:void 0,t:void 0}),l})()};V(["click"]);var Ms=P('<div><div class="flex-1 overflow-y-auto p-2 sm:p-4"><div class=pb-8>');const Us=()=>{const e=ds("connections");return J(()=>_t(e())),null},_s=({children:e})=>{const t=nt();return J(()=>{Lt()&&Me(t()?It():kt())}),(()=>{var a=Ms(),s=a.firstChild,n=s.firstChild;return f(a,c(ws,{}),s),f(n,e),f(a,c(L,{get when(){return N()},get children(){return c(Us,{})}}),null),U(o=>{var r=D("relative flex h-screen flex-col overscroll-y-none subpixel-antialiased",Dt()?"font-twemoji":"font-no-twemoji"),p=us();return r!==o.e&&M(a,o.e=r),p!==o.t&&Z(a,"data-theme",o.t=p),o},{e:void 0,t:void 0}),a})()},qs=_(()=>q(()=>import("./Setup-BoY51rGb.js"),__vite__mapDeps([0,1]),import.meta.url)),pe=_(()=>q(()=>import("./Overview-C8T8zkgK.js"),__vite__mapDeps([2,1]),import.meta.url)),js=_(()=>q(()=>import("./Connections-DkCGUk06.js"),__vite__mapDeps([3,1,4,5,6]),import.meta.url)),As=_(()=>q(()=>import("./Logs-B6a-XADG.js"),__vite__mapDeps([7,1,4,5]),import.meta.url)),Fs=_(()=>q(()=>import("./Proxies-BFGT23Bh.js"),__vite__mapDeps([8,1,6,5]),import.meta.url)),zs=_(()=>q(()=>import("./Rules-Bs7Ykwh9.js"),__vite__mapDeps([9,1,6]),import.meta.url)),Ns=_(()=>q(()=>import("./Config-B243f-qt.js"),__vite__mapDeps([10,1,5]),import.meta.url));ot.extend(rt);lt(()=>c(St,{get locale(){return Ct()},get children(){return[c(it,{root:_s,get children(){return[c(T,{get path(){return C.Setup},component:qs}),c(T,{path:"/",component:pe}),c(T,{get path(){return C.Overview},component:pe}),c(T,{get path(){return C.Proxies},component:Fs}),c(T,{get path(){return C.Rules},component:zs}),c(T,{get path(){return C.Conns},component:js}),c(T,{get path(){return C.Log},component:As}),c(T,{get path(){return C.Config},component:Ns})]}}),c(ct,{position:"bottom-center"})]}}),document.querySelector("#root"));export{Zs as $,ha as A,he as B,ht as C,Hs as D,ya as E,bt as F,ga as G,fa as H,va as I,ea as J,Ks as K,xe as L,Va as M,wa as N,Ys as O,Js as P,k as Q,Gs as R,Qs as S,I as T,Xs as U,ye as V,$t as W,W as X,R as Y,E as Z,Vs as _,rs as a,Es as a0,Ws as a1,$ as a2,Ss as a3,X as a4,Oa as a5,Ha as a6,Bs as a7,Ja as a8,Aa as a9,ft as aA,na as aB,kt as aC,It as aD,Dt as aE,Na as aF,_a as aG,Fa as aa,za as ab,z as ac,Ct as ad,ja as ae,Ra as af,w as ag,qa as ah,Ca as ai,La as aj,Sa as ak,Ia as al,Ta as am,ka as an,$a as ao,Ma as ap,Da as aq,Ua as ar,C as as,yt as at,O as au,ta as av,Os as aw,sa as ax,Lt as ay,aa as az,Wa as b,ds as c,N as d,ls as e,we as f,vt as g,ra as h,ua as i,pa as j,oa as k,Te as l,Ut as m,xa as n,be as o,At as p,ca as q,la as r,Xa as s,Ba as t,Ce as u,Pa as v,da as w,ia as x,ba as y,ma as z};
